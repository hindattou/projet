{% extends 'base.html' %}
{% block content %}

<!-- WELCOME -->
<div style="margin-top:1.5rem;margin-bottom:2.5rem;">
  <h1 class="page-title">Bonjour, <span style="color:var(--teal);">{{ user.prenom }}</span> ğŸ‘‹</h1>
  <p class="page-subtitle">Bienvenue sur votre espace santÃ© personnel</p>
</div>

<div class="row g-4">

  <!-- INFOS PERSONNELLES -->
  <div class="col-md-5">
    <div class="card h-100">
      <div class="card-header bg-secondary">ğŸ‘¤ Mes Informations</div>
      <div class="card-body p-0">
        <ul class="list-group list-group-flush">
          <li class="list-group-item d-flex justify-content-between">
            <strong>Nom</strong><span class="text-muted">{{ user.nom }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <strong>PrÃ©nom</strong><span class="text-muted">{{ user.prenom }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <strong>Email</strong><span class="text-muted small">{{ user.email }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <strong>TÃ©lÃ©phone</strong><span class="text-muted">{{ user.telephone or 'â€”' }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <strong>Adresse</strong><span class="text-muted small" style="max-width:60%;text-align:right;">{{ user.adresse or 'â€”' }}</span>
          </li>
        </ul>
        <div class="p-3 text-center border-top" style="border-color:var(--border)!important;">
          <a href="{{ url_for('edit_profile') }}" class="btn btn-sm btn-outline-secondary">âœï¸ Modifier mes informations</a>
        </div>
      </div>
    </div>
  </div>

  <!-- RENDEZ-VOUS -->
  <div class="col-md-7">
    <div class="card h-100">
      <div class="card-header bg-hope-accent">ğŸ“… Mon Rendez-vous</div>
      <div class="card-body" style="display:flex;flex-direction:column;gap:1.25rem;">

        {% if rdv %}
        <!-- RDV CONFIRMÃ‰ -->
        <div style="background:linear-gradient(135deg,var(--navy),var(--navy-mid));border-radius:16px;padding:2rem;text-align:center;position:relative;overflow:hidden;">
          <div style="position:absolute;top:-40px;right:-40px;width:130px;height:130px;background:radial-gradient(circle,rgba(0,201,167,.18),transparent);border-radius:50%;"></div>
          <div style="background:rgba(0,201,167,.2);color:var(--teal);border-radius:20px;padding:.2rem .85rem;font-size:.72rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase;display:inline-block;margin-bottom:.75rem;position:relative;">âœ… ConfirmÃ©</div>
          <div style="font-family:var(--font-serif);font-size:3rem;color:var(--teal);line-height:1;position:relative;">{{ rdv.heure_rdv }}</div>
          <div style="color:rgba(255,255,255,.75);font-size:1rem;margin-top:.4rem;position:relative;">{{ rdv.date_rdv }}</div>
        </div>
        <p class="text-muted small text-center">â° PrÃ©sentez-vous <strong>10 minutes</strong> Ã  l'avance.</p>

        <!-- ACTIONS -->
        <div style="display:flex;gap:.75rem;justify-content:center;">
          <a href="{{ url_for('appointment') }}" class="btn btn-sm btn-outline-secondary">âœï¸ Modifier le RDV</a>
          <form method="POST" action="{{ url_for('appointment') }}" onsubmit="return confirm('Annuler ce rendez-vous ?')">
            <input type="hidden" name="action" value="cancel_rdv">
            <button type="submit" class="btn btn-sm" style="background:rgba(224,92,92,.1);color:var(--danger);border:1.5px solid rgba(224,92,92,.3);border-radius:10px;font-weight:500;padding:.35rem .9rem;">
              ğŸ—‘ Annuler
            </button>
          </form>
        </div>

        {% else %}
        <!-- PAS DE RDV -->
        <div style="background:var(--off-white);border-radius:16px;padding:2.5rem;text-align:center;">
          <div style="font-size:3rem;margin-bottom:.75rem;">ğŸ“…</div>
          <div style="font-weight:600;color:var(--navy);margin-bottom:.4rem;">Aucun rendez-vous programmÃ©</div>
          <div class="text-muted small">Prenez rendez-vous dÃ¨s maintenant pour votre prochaine consultation.</div>
        </div>
        <div class="text-center">
          <a href="{{ url_for('appointment') }}" class="btn btn-hope-primary btn-lg px-5">
            â• Prendre Rendez-vous
          </a>
        </div>
        {% endif %}

      </div>
    </div>
  </div>

</div>
{% endblock %}
